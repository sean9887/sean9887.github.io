---
published: true
layout: post
title: "3D LiDAR 시각화"
categories: [Python]
tags: [LiDAR, PCD]
---

## LiDAR

- LiDAR(Light Detection and Ranging)는 레이저를 쏘아 주변 물체까지의 거리 정보를 수집하는 센서
- 이를 통해 차량 주변 환경을 수천 개의 점(Points)으로 구성된 3차원 데이터로 표현할 수 있음


## Point Cloud 데이터 (PCD)

- 3D 공간 상의 점 (x, y, z) + intensity
- 자율주행에서 가장 널리 쓰이는 3D 센서 데이터
- `.pcd`, `.bin`, `.ply` 등 다양한 포맷 존재

## 3d LiDAR 시각화: KITTI 데이터셋 활용

KITTI 데이터셋에서는 3D 센서 데이터 정보를 `.bin` 포맷으로 제공하고 포인트는 다음과 같은 구조로 저장되어 있음

- `x`, `y`, `z` : 공간 좌표
- `intensity` : 반사 강도

### 파일 포맷: `.bin`
```python
import open3d as o3d
import numpy as np

# 1. 포인트 클라우드 로드
points = np.fromfile("sample.bin", dtype=np.float32).reshape(-1, 4)[:, :3]

# 2. Open3D 포맷으로 변환
pcd = o3d.geometry.PointCloud()
pcd.points = o3d.utility.Vector3dVector(points)
pcd.paint_uniform_color([1.0, 1.0, 1.0])

# 3. 좌표축 추가
axis = o3d.geometry.TriangleMesh.create_coordinate_frame(size=2.0)

# 4. 검은색 배경
vis = o3d.visualization.Visualizer()
vis.create_window(window_name="Point Cloud Viewer", width=1280, height=720)
vis.add_geometry(pcd)
vis.add_geometry(axis)

opt = vis.get_render_option()
opt.background_color = np.array([0, 0, 0])
opt.point_size = 1.5

vis.run()
vis.destroy_window()
```
<img width="1148" alt="Image" src="https://github.com/user-attachments/assets/7109d807-d47b-4a98-b94f-64e9f81955a7" />

